version: '3.4'

# Default compose will create an ows image, with dev settings and connect to a local db
services:
  easi-cookbook:
    build: docker/easi-cookbook
    environment:
      # Defaults are defined in .env file
      DB_HOSTNAME: ${DB_HOSTNAME}
      DB_PORT: ${DB_PORT}
      DB_USERNAME: ${DB_USERNAME}
      DB_PASSWORD: ${DB_PASSWORD}
      DB_DATABASE: ${DB_DATABASE}
      JUPYTERHUB_API_TOKEN: 0000
    volumes:
      - ~/.aws:/home/vscode/.aws
      - ~/.easi-workflows-auth.conf:/home/vscode/.easi-workflows-auth.conf
      - ~/dev/devcontainers/data:/data
    restart: no